{% extends "base.html" %}
{% block title %}会员资料修改{% endblock %}

{% block scripts %}
{% endblock %}

{% block content %}
<div class="tabbable">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#tab-basic" data-toggle="tab">基本资料</a></li>
        <li><a href="#tab-email" data-toggle="tab">修改邮箱</a></li>
        <li><a href="#tab-password" data-toggle="tab">修改密码</a></li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active" id="tab-basic">
            <form action="{{ url_for('user.edit') }}" class="form-horizontal" id="form-userinfo" method="post">
                {{ form.hidden_tag() }}
                <div class="control-group {{ form.nickname.errors and 'error' }}">
                    <label class="control-label">昵称</label>
                    <div class="controls">
                        {{ form.nickname }}
                        <span class="help-inline">{{ form.nickname.errors | first }}</span>
                    </div>
                </div>
                
                {% if not form.slug.value %}
                <div class="control-group {{ form.slug.errors and 'error' }}">
                    <label class="control-label">域名</label>
                    <div class="controls">
                        {{ form.slug }}
                        <span class="help-inline">{{ form.slug.errors | first }}</span>
                    </div>
                </div>
                {% else %}
                <div class="control-group">
                    <label class="control-label">域名</label>
                    <div class="controls">
                        <span class="input-large uneditable-input">{{ form.slug.value }}</span>
                    </div>
                </div>
                {% endif %}
                
                <div class="control-group {{ form.phone.errors and 'error' }}">
                    <label class="control-label">手机号码</label>
                    <div class="controls">
                        {{ form.phone }}
                        <span class="help-inline">{{ form.phone.errors | first }}</span>
                        <div>
                            {% for radio in form.phone_status %}
                            <label class="radio inline">
                                {{ radio }} {{ radio.label }}
                            </label>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="control-group {{ form.motoo.errors and 'error' }}">
                    <label class="control-label">座右铭</label>
                    <div class="controls">
                        {{ form.motoo }}
                        <span class="help-inline">{{ form.motoo.errors | first }}</span>
                    </div>
                </div>
                <div class="control-group {{ form.introduction.errors and 'error' }}">
                    <label class="control-label">个人介绍</label>
                    <div class="controls">
                        {{ form.introduction }}
                        <span class="help-block">{{ form.introduction.errors | first }}</span>
                    </div>
                </div>
                {% if error %}
                    <div class="alert alert-error">
                        <strong>错误：</strong> {{ error }}
                    </div>
                {% endif %}
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">更新资料</button>
                </div>
            </form>
        </div><!-- #tab-basic -->
        
        <div class="tab-pane" id="tab-email">
            <form action="" class="form-horizontal" id="form-email" method="post">
                <div class="control-group">
                    <label class="control-label">电子邮件</label>
                    <div class="controls">
                        <input type="text" name="email" />
                        <span class="help-inline"></span>
                    </div>
                </div>
                <div class="alert alert-info">
                    电子邮件可能用于接收信息，为避免垃圾邮件，更新邮件邮件地址需要通过邮件验证
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">发送验证邮件</button>
                </div>
            </form>
        </div><!-- #tab-email -->
        
        <div class="tab-pane" id="tab-password">
            <form action="" class="form-horizontal" id="form-email" method="post">
                <div class="control-group">
                    <label class="control-label">原始密码</label>
                    <div class="controls">
                        <input type="password" name="old_password" />
                        <span class="help-inline">请提供原始密码</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">新密码</label>
                    <div class="controls">
                        <input type="password" name="password" />
                        <span class="help-inline">输入新密码</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">确认新密码</label>
                    <div class="controls">
                        <input type="password" name="repassword" />
                        <span class="help-inline">再次输入新密码</span>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">更改密码</button>
                </div>
        </div>
    </div><!-- .tab-content -->
{% endblock %}
